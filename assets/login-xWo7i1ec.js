import{_ as B}from"./index.vuevuetypescriptsetuptruelang-O913YC12.js";import{_ as D}from"./index-CS5NO12N.js";import{m as M,u as $,g as C,I as G,n as V,o as z,p as H,q as j,F as E,h as Y}from"./antd-Ca0Vg3PV.js";import{p as Z,_ as J}from"./typing-DlLTPOuc.js";import{a as K,u as O}from"./context-BmN6W11l.js";import{u as x}from"./request-BpTcGDpH.js";import{u as Q}from"./index-DMRLcZlW.js";import{f as R,d as W,r as b,a6 as X,k as e,Z as a,a8 as ee,$ as d,a9 as c,aa as te,u as s,ac as h,Y as w,G as oe}from"./vue-BrVXbuSH.js";import"./plugin-vueexport-helper-DlAUqK2U.js";function ne(){const t=Q(),i=async o=>(t.setToken("testToken"),t.setUserInfo({name:"超級管理員",account:"admin",role:"ADMIN"}),{role:"ADMIN"}),p=async()=>{const o=await x("/user/info");if(o){t.setToken(o.token);const{name:_,account:m,role:l}=o;t.setUserInfo({name:_,account:m,role:l})}},u=R();return{backendUserLogin:i,getUserInfo:p,profile:u,getUserProfile:async()=>{u.value=await x("/user/profile")}}}const ae={class:"ant-pro-basicLayout","data-theme":"light"},se={"h-full":"",flex:"","flex-col":"","flex-1":""},re={class:"bg-neutral-50 rounded p-10 w-628px"},ce={class:"text-center mt-10"};var k=(t=>(t.THERAPIST="/appointment",t.ADMIN="/",t.MANAGER="/",t))(k||{});const ye=W({__name:"login",props:Z,setup(t){const i=t,{backendUserLogin:p}=ne();K(i);const{headerHeight:u}=O(),o=b(M({account:"",password:""})),_=b({account:[{required:!0,message:"請輸入帳號",trigger:"blur"}],password:[{required:!0,message:"請輸入密碼",trigger:"blur"}]}),m=ee(),{validateInfos:l,validate:I}=$(o,_);function L(){I().then(async()=>{const f=await p(o);if(f){const n=k[f.role];m.push({path:n,replace:!0})}})}return(f,n)=>{const S=G,g=V,y=z,v=D,N=H,A=j,P=B,T=E,q=Y,F=C;return d(),X("div",ae,[e(F,null,{default:a(()=>[e(J),e(q,{class:"ant-pro-basicLayout-content !m-0 md:m-6",flex:"","flex-col":""},{default:a(()=>[c("div",se,[c("div",{class:"bg-beige-100 py-40 px-4 flex justify-center items-center",style:te({height:`calc(100vh - ${s(u)}px)`})},[c("div",re,[n[3]||(n[3]=c("div",{class:"font-500 text-[32px] text-neutral-900 text-center mb-2"}," 登入 ",-1)),e(T,{class:"px-0 lg:px-32px",layout:"vertical",autocomplete:"off",onSubmit:L},{default:a(()=>[e(A,{gutter:[16,16]},{default:a(()=>[e(y,{span:24},{default:a(()=>[e(g,h({label:"帳號",required:""},s(l).account),{default:a(()=>[e(S,{value:s(o).account,"onUpdate:value":n[0]||(n[0]=r=>s(o).account=r),placeholder:"請輸入"},null,8,["value"])]),_:1},16)]),_:1}),e(y,{span:24},{default:a(()=>[e(g,h({label:"密碼",required:""},s(l).password),{default:a(()=>[e(N,{value:s(o).password,"onUpdate:value":n[1]||(n[1]=r=>s(o).password=r),placeholder:"請輸入"},{iconRender:a(r=>[r?(d(),w(v,{key:0,name:"eye"})):(d(),w(v,{key:1,name:"eye-off"}))]),_:1},8,["value"])]),_:1},16)]),_:1})]),_:1}),c("div",ce,[e(P,{color:"primary","html-type":"submit",size:"large"},{default:a(()=>n[2]||(n[2]=[oe(" 登入 ")])),_:1})])]),_:1})])],4)])]),_:1})]),_:1})])}}});export{ye as default};
