import{_ as H}from"./index.vuevuetypescriptsetuptruelang-BCHxm6rb.js";import{_ as L}from"./index.vuevuetypestyleindex0lang-HDsWQUX7.js";import{_ as q}from"./index.vuevuetypescriptsetuptruelang-O913YC12.js";import{_ as G}from"./index-CS5NO12N.js";import{m as J,u as Q,I as Y,n as Z,H as W,J as X,F as h,e as D}from"./antd-Ca0Vg3PV.js";import{h as E,u as ee}from"./index-DMRLcZlW.js";import{d as V,f as A,r as U,$ as i,Y as R,Z as t,k as n,a9 as g,ac as N,u as e,G as d,a3 as m,a6 as b,a5 as P,H as M,a4 as te,F as se}from"./vue-BrVXbuSH.js";import"./context-BmN6W11l.js";import"./plugin-vueexport-helper-DlAUqK2U.js";const oe={class:"col-12 md:col-6"},ae={class:"col-12 md:col-6"},ne={class:"flex items-center"},le={class:"col-12 md:col-6"},re={class:"col-12 md:col-6"},ie={key:0,class:"col-12 md:col-6"},ue={key:1,class:"col-12 md:col-6"},ce={key:2,class:"col-12 md:col-6"},de={key:3,class:"col-12 md:col-6"},me=V({__name:"EditModal",setup(O,{expose:j}){const c=A(!1),y=A(null),u=A(!0),x=A(!1),p={account:"",password:"",userName:"",email:"",isAdmin:!1},r=U(J(p)),_=U({account:[{message:"請輸入帳號",required:!0,trigger:"blur"}],password:[{message:"請輸入密碼",required:!0,trigger:"blur"}],userName:[{message:"請輸入使用者名稱",required:!0,trigger:"blur"}],email:[{message:"請輸入Email",required:!0,trigger:"blur"}],isAdmin:[{message:"請選擇是否為管理者",required:!0,trigger:"blur"}]}),$=E(),{validateInfos:k,validate:S,resetFields:l}=Q(r,_);async function B(){try{console.log(r),await S(),$.success({message:u.value?"新增帳號成功":"編輯帳號成功",placement:"top"}),c.value=!1}catch(f){console.error(f)}}function I(f){c.value=!0,x.value=!1,f?(u.value=!1,y.value=f,l(f)):(u.value=!0,l(p))}return j({show:I}),(f,s)=>{const w=Y,a=Z,K=q,C=W,F=X,T=h,z=D;return i(),R(z,{open:e(c),"onUpdate:open":s[6]||(s[6]=o=>M(c)?c.value=o:null),title:e(u)?"新增帳號":"編輯帳號",centered:"","ok-text":"確定","cancel-text":"取消",width:"628px","ok-button-props":{class:"mb-5"},"cancel-button-props":{class:"mb-5"},onOk:B},{default:t(()=>[n(T,{layout:"vertical",autocomplete:"off",class:"row g-4"},{default:t(()=>[g("div",oe,[n(a,N(e(k).account,{label:"帳號"}),{default:t(()=>[n(w,{value:e(r).account,"onUpdate:value":s[0]||(s[0]=o=>e(r).account=o),placeholder:"請輸入"},null,8,["value"])]),_:1},16)]),g("div",ae,[n(a,N(e(k).password,{label:"密碼"}),{default:t(()=>[g("div",ne,[n(w,{value:e(r).password,"onUpdate:value":s[1]||(s[1]=o=>e(r).password=o),type:"password",class:"mr-2",disabled:!e(u)&&!e(x),placeholder:"請輸入"},null,8,["value","disabled"]),!e(u)&&!e(x)?(i(),R(K,{key:0,color:"secondary",onClick:s[2]||(s[2]=o=>x.value=!0)},{default:t(()=>s[7]||(s[7]=[d(" 重設 ")])),_:1})):m("",!0)])]),_:1},16)]),g("div",le,[n(a,N(e(k).userName,{label:"使用者名稱"}),{default:t(()=>[n(w,{value:e(r).userName,"onUpdate:value":s[3]||(s[3]=o=>e(r).userName=o),placeholder:"請輸入"},null,8,["value"])]),_:1},16)]),g("div",re,[n(a,N(e(k).email,{label:"Email"}),{default:t(()=>[n(w,{value:e(r).email,"onUpdate:value":s[4]||(s[4]=o=>e(r).email=o),placeholder:"請輸入"},null,8,["value"])]),_:1},16)]),e(u)?(i(),b("div",ie,[n(a,N(e(k).isAdmin,{label:"總管理者"}),{default:t(()=>[n(F,{value:e(r).isAdmin,"onUpdate:value":s[5]||(s[5]=o=>e(r).isAdmin=o)},{default:t(()=>[n(C,{value:!0},{default:t(()=>s[8]||(s[8]=[d(" 是 ")])),_:1}),n(C,{value:!1},{default:t(()=>s[9]||(s[9]=[d(" 否 ")])),_:1})]),_:1},8,["value"])]),_:1},16)])):m("",!0),e(u)?m("",!0):(i(),b("div",ue,[n(a,{label:"執行中專案"},{default:t(()=>{var o,v;return[d(P(((v=(o=e(r))==null?void 0:o.projectsInProgress)==null?void 0:v.join("、"))||"-"),1)]}),_:1})])),e(u)?m("",!0):(i(),b("div",ce,[n(a,{label:"目前身份"},{default:t(()=>{var o,v;return[d(P(((v=(o=e(r))==null?void 0:o.permissions)==null?void 0:v.join("、"))||"-"),1)]}),_:1})])),e(u)?m("",!0):(i(),b("div",de,[n(a,{label:"已結束專案"},{default:t(()=>{var o,v;return[d(P(((v=(o=e(r))==null?void 0:o.completedProjects)==null?void 0:v.join("、"))||"-"),1)]}),_:1})]))]),_:1})]),_:1},8,["open","title"])}}}),pe={key:0,class:"text-neutral-900"},_e={key:1,class:"text-neutral-600 h-[300px] md:h-[500px] text-lg flex justify-center items-center font-bold"},Ne=V({__name:"index",setup(O){const j=A(null),c=ee(),y=A(!1),u=[{title:"帳號",dataIndex:"account",key:"account"},{title:"使用者姓名",dataIndex:"userName",key:"userName"},{title:"身份",dataIndex:"permissions",key:"permissions"},{title:"執行中專案",dataIndex:"projectsInProgress",key:"projectsInProgress"},{title:"操作",dataIndex:"action",key:"action"}],x=E(),p=[{id:"1",account:"AAA",userName:"金貝貝",permissions:["總管理者"],isAdmin:!0,email:"test@example.com",password:"******"},{id:"2",account:"BBB",userName:"潘小名",permissions:["L專案負責人","C專案成員","K專案負責人"],projectsInProgress:["L專案","C專案","K專案"],completedProjects:["P專案","Q專案","R專案"],isAdmin:!1,email:"test@example.com",password:"******"},{id:"3",account:"CCC",userName:"Bella",permissions:["M專案成員","T專案負責人","F專案成員"],projectsInProgress:["M專案","T專案","F專案"],completedProjects:["A專案","D專案","V專案"],isAdmin:!1,email:"test@example.com",password:"******"}],r={total:p.length,pages:1,size:10,current:1,countRange:"1"},_=U({selectedRowKeys:[],selectedRows:[]});function $(S,l){_.selectedRowKeys=S,_.selectedRows=l}async function k(){x.success({message:"刪除帳號成功",placement:"top"}),y.value=!1,_.selectedRowKeys=[],_.selectedRows=[]}return(S,l)=>{const B=G,I=q,f=L,s=D,w=H;return i(),R(w,{title:"帳號管理"},te({default:t(()=>[g("div",null,[(p==null?void 0:p.length)>0?(i(),R(f,N({key:0,columns:u,"table-layout":"auto",scroll:{x:"max-content"},"data-source":p,pagination:r},{...e(c).isAdmin&&{rowSelection:{selectedRowKeys:e(_).selectedRowKeys,onChange:$}}}),{extraStart:t(()=>[e(c).isAdmin?(i(),R(I,{key:0,disabled:e(_).selectedRowKeys.length===0,color:"secondary",size:"small",class:"mb-2",onClick:l[1]||(l[1]=a=>y.value=!0)},{default:t(()=>l[4]||(l[4]=[d(" 刪除 ")])),_:1},8,["disabled"])):m("",!0)]),bodyCell:t(({column:a,record:K,text:C})=>[a.key==="account"||a.key==="userName"?(i(),b("span",pe,P(C),1)):m("",!0),a.key==="permissions"||a.key==="projectsInProgress"?(i(),b(se,{key:1},[d(P(C?C.join("、"):"-"),1)],64)):m("",!0),a.key==="action"?(i(),R(I,{key:2,color:"link",onClick:()=>{var F;return(F=e(j))==null?void 0:F.show(K)}},{default:t(()=>l[5]||(l[5]=[g("span",{class:"text-brown-500 underline underline-offset-4 text-sm"},"編輯",-1)])),_:2},1032,["onClick"])):m("",!0)]),_:1},16)):(i(),b("div",_e," 沒有資料 "))]),n(me,{ref_key:"modalRef",ref:j},null,512),n(s,{open:e(y),"onUpdate:open":l[2]||(l[2]=a=>M(y)?y.value=a:null),title:"確定刪除帳號？",centered:"","ok-text":"確定","cancel-text":"取消","ok-button-props":{class:"mb-5"},"cancel-button-props":{class:"mb-5"},onOk:k},{default:t(()=>l[6]||(l[6]=[g("div",{class:"text-center text-16 text-beige-900 mb-8"}," 您選擇的帳號將刪除。 ",-1)])),_:1},8,["open"])]),_:2},[e(c).isAdmin?{name:"extraContent",fn:t(()=>[n(I,{color:"primary",onClick:l[0]||(l[0]=()=>{var a;(a=e(j))==null||a.show()})},{icon:t(()=>[n(B,{name:"plus",width:"16px"})]),default:t(()=>[l[3]||(l[3]=d(" 新增帳號 "))]),_:1})]),key:"0"}:void 0]),1024)}}});export{Ne as default};
