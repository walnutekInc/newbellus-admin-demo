import{_ as ee}from"./index.vuevuetypescriptsetuptruelang-CXhdpZX4.js";import{_ as G}from"./index.vuevuetypestyleindex0lang-HDsWQUX7.js";import{_ as Q}from"./index.vuevuetypescriptsetuptruelang-O913YC12.js";import{_ as te}from"./index-CS5NO12N.js";import{e as j,u as Y,w as z,n as V,G as W,F as P,I as oe}from"./antd-Ca0Vg3PV.js";import{d as w,f as C,$ as u,Y as g,Z as t,a9 as s,a5 as E,u as e,a6 as M,F as K,a7 as ne,a3 as S,k as o,H as h,G as O,r as U,ac as F}from"./vue-BrVXbuSH.js";import"./index-BKHAbEsV.js";import"./context-DBnFWosq.js";import"./plugin-vueexport-helper-DlAUqK2U.js";const se="/newbellus-admin-demo/assets/regression_prediction-DpDh5hIb.png",le="/newbellus-admin-demo/assets/confusion_matrix-D2CA9NE2.png",ae={class:"text-lg"},re={key:0,class:"flex justify-between"},ie=["src"],ue={key:0,class:"text-neutral-900"},ce={key:1,class:"text-neutral-900"},de=w({__name:"ResultModal",setup($,{expose:T}){const d={FIT_TIME:"擬合時間",SCORE_TIME:"評分時間",MEAN_ABSOLUTE_ERROR:"平均絕對誤差",MEAN_SQUARED_ERROR:"均方誤差",R2:"R2"},r={FIT_TIME:"擬合時間",SCORE_TIME:"評分時間",ACCURACY:"準確度",AVERAGE_PRCISION:"平均精度",RECALL_WEIGHTED:"加權召回度"},R=[{title:"模型",dataIndex:"name",key:"name"},{title:"FIT_TIME(擬合時間)",dataIndex:"FIT_TIME",key:"FIT_TIME"},{title:"SCORE_TIME(評分時間)",dataIndex:"SCORE_TIME",key:"SCORE_TIME"},{title:"MEAN_ABSOLUTE_ERROR(平均絕對誤差)",dataIndex:"MEAN_ABSOLUTE_ERROR",key:"MEAN_ABSOLUTE_ERROR"},{title:"MEAN_SQUARED_ERROR(均方誤差)",dataIndex:"MEAN_SQUARED_ERROR",key:"MEAN_SQUARED_ERROR"},{title:"R2(R2)",dataIndex:"r2",key:"r2"}],_=C(!1),x=C(void 0),a=C(void 0),k=C(d),i={total:3,pages:1,size:10,current:1,countRange:"1"};function m(n){_.value=!0,x.value=n,a.value=n.models.find(f=>f.name===n.bestModel),k.value=n.task==="REGRESSION"?d:r}function y(){_.value=!1,x.value=void 0,a.value=void 0}return T({show:m}),(n,f)=>{const b=G,l=j;return u(),g(l,{open:e(_),"onUpdate:open":f[0]||(f[0]=p=>h(_)?_.value=p:null),title:"分析結果",centered:"","ok-text":"確定",width:"845px",class:"@container","ok-button-props":{class:"mb-5"},"cancel-button-props":{class:"hidden"},onOk:y},{default:t(()=>{var p,v;return[s("p",ae," 最佳模型："+E(e(a)&&`${e(a).name}(${e(a).label})`),1),f[2]||(f[2]=s("p",{class:"text-lg mb-2"}," 指標： ",-1)),e(a)?(u(),M("div",re,[(u(!0),M(K,null,ne(Object.keys(e(k)),c=>{var I;return u(),M("div",{key:c,class:"text-sm"},[s("p",null,[O(E(c),1),f[1]||(f[1]=s("br",null,null,-1)),O(E(`(${e(k)[c]})`),1)]),s("p",null,E((I=e(a))==null?void 0:I[c]),1)])}),128))])):S("",!0),e(x)?(u(),M("img",{key:1,src:((p=e(x))==null?void 0:p.task)==="REGRESSION"?e(se):e(le),width:"500",class:"block mx-auto"},null,8,ie)):S("",!0),o(b,{columns:R,"table-layout":"auto",scroll:{x:"max-content"},"data-source":(v=e(x))==null?void 0:v.models,pagination:i},{bodyCell:t(({column:c,record:I,text:N})=>[c.key==="name"?(u(),M("span",ue,E(`${I.name}(${I.label})`),1)):(u(),M("span",ce,E(N),1))]),_:1},8,["data-source"])]}),_:1},8,["open"])}}}),_e={class:"col-12"},me={class:"flex"},pe={class:"flex"},Ee=w({__name:"PredictionModal",setup($,{expose:T}){const d=C(!1),r=U({model:"",csv:void 0}),R=U({model:[{message:"請選擇模型",required:!0,trigger:"blur"}],csv:[{message:"請上傳CSV檔案",required:!0,trigger:"blur"}]}),{validateInfos:_,resetFields:x,validate:a}=Y(r,R);async function k(){try{console.log(r),await a(),d.value=!1,x({model:"",csv:void 0})}catch(y){console.error(y)}}function i(){d.value=!0}function m(y){console.log(y)}return T({show:i}),(y,n)=>{const f=z,b=V,l=Q,p=W,v=P,c=j;return u(),g(c,{open:e(d),"onUpdate:open":n[2]||(n[2]=I=>h(d)?d.value=I:null),title:"預測",centered:"","ok-text":"確定","cancel-text":"取消",width:"628px","ok-button-props":{class:"mb-5"},"cancel-button-props":{class:"mb-5"},onOk:k},{default:t(()=>[o(v,{layout:"vertical",autocomplete:"off",class:"row g-4"},{default:t(()=>[s("div",_e,[o(b,F(e(_).model,{label:"模型",required:""}),{default:t(()=>[o(f,{value:e(r).model,"onUpdate:value":n[0]||(n[0]=I=>e(r).model=I),options:[{value:"XGBRegressor",label:"XGBRegressor(極端梯度提升回歸器)"}],placeholder:"請選擇"},null,8,["value"])]),_:1},16),o(b,F(e(_).csv,{label:"上傳CSV",required:""}),{default:t(()=>[s("div",me,[o(p,{"file-list":e(r).csv,"onUpdate:fileList":n[1]||(n[1]=I=>e(r).csv=I),accept:"text/csv",name:"file",onChange:m},{default:t(()=>[o(l,{color:"secondary"},{default:t(()=>n[3]||(n[3]=[O(" 選擇檔案 ")])),_:1})]),_:1},8,["file-list"]),o(l,{color:"link",class:"text-sm"},{default:t(()=>n[4]||(n[4]=[O(" 下載預測範本 ")])),_:1})])]),_:1},16),o(b,{label:"預測結果下載",required:""},{default:t(()=>[s("div",pe,[o(l,{color:"secondary",class:"text-sm"},{default:t(()=>n[5]||(n[5]=[O(" 下載 ")])),_:1}),n[6]||(n[6]=s("div",{class:"px-4 py-2 text-base"}," 預測失敗 ",-1))])]),_:1})])]),_:1})]),_:1},8,["open"])}}}),Re={class:"text-center text-lg"},fe={class:"mb-4"},be={class:"mb-4"},Ie={class:"col-12"},ve={class:"flex"},xe={class:"flex"},ke=w({__name:"MoreInfoModal",setup($,{expose:T}){const d=[{title:"最小值",dataIndex:"min",key:"min"},{title:"25分位距",dataIndex:"Q1",key:"Q1"},{title:"50分位距",dataIndex:"Q2",key:"Q2"},{title:"75分位距",dataIndex:"Q3",key:"Q3"},{title:"最大值",dataIndex:"max",key:"max"}],r=C(!1),R=C(void 0),_=U({columnType:void 0,missingHandle:void 0});function x(k){r.value=!0,R.value=k}function a(){r.value=!1}return T({show:x}),(k,i)=>{const m=G,y=z,n=Q,f=V,b=P,l=j;return u(),g(l,{open:e(r),"onUpdate:open":i[2]||(i[2]=p=>h(r)?r.value=p:null),title:"更多資訊",centered:"","ok-text":"確定",width:"845px","ok-button-props":{class:"mb-5"},"cancel-button-props":{class:"hidden"},onOk:a},{default:t(()=>{var p,v,c,I,N,D,B;return[s("p",Re," 欄位名稱："+E((p=e(R))==null?void 0:p.name),1),s("ul",fe,[s("li",null,"欄位類型："+E((v=e(R))==null?void 0:v.typeLabel),1),s("li",null,"總筆數："+E((c=e(R))==null?void 0:c.total),1),s("li",null,"缺失值："+E((I=e(R))==null?void 0:I.missing),1),s("li",null,"平均值："+E((N=e(R))==null?void 0:N.average),1),s("li",null,"標準差："+E((D=e(R))==null?void 0:D.standardDeviation),1)]),s("div",be,[o(m,{columns:d,"table-layout":"auto",scroll:{x:"max-content"},"data-source":[e(R)],pagination:!1},null,8,["data-source"])]),((B=e(R))==null?void 0:B.type)==="DISCRETE"?(u(),g(b,{key:0,layout:"vertical",autocomplete:"off",class:"row g-4"},{default:t(()=>[s("div",Ie,[o(f,{label:"修改欄位類型"},{default:t(()=>[s("div",ve,[o(y,{value:e(_).columnType,"onUpdate:value":i[0]||(i[0]=A=>e(_).columnType=A),options:[{value:"CONTINUOUS",label:"continuous variable"}],placeholder:"請輸入"},null,8,["value"]),o(n,{color:"primary",class:"ml-2"},{default:t(()=>i[3]||(i[3]=[O(" 儲存 ")])),_:1})])]),_:1}),o(f,{label:"修改缺失處理"},{default:t(()=>[s("div",xe,[o(y,{value:e(_).missingHandle,"onUpdate:value":i[1]||(i[1]=A=>e(_).missingHandle=A),options:[{value:"FILL_MODE",label:"fill mode"}],placeholder:"請輸入"},null,8,["value"]),o(n,{color:"primary",class:"ml-2"},{default:t(()=>i[4]||(i[4]=[O(" 儲存 ")])),_:1})])]),_:1})])]),_:1})):S("",!0)]}),_:1},8,["open"])}}}),ye="/newbellus-admin-demo/assets/correlation_matrix-9NncxoX7.png",Ce={class:"col-12"},Me={class:"flex"},Oe={key:1},ge={key:1,class:"text-neutral-900"},Te=["src"],Se=w({__name:"JobCreationModal",setup($,{expose:T}){const d=C(!1),r=U({job:"",csv:void 0}),R=U({job:[{message:"請輸入工作名稱",required:!0,trigger:"blur"}],csv:[{message:"請上傳CSV檔案",required:!0,trigger:"blur"}]}),{validateInfos:_,validate:x}=Y(r,R),a=C(void 0),k=C(null),i={total:3,pages:1,size:10,current:1,countRange:"1"},m=[{title:"COLUMN NAME",dataIndex:"name",key:"name"},{title:"COLUMN TYPE",dataIndex:"typeLabel",key:"typeLabel"},{title:"MORE INFO",dataIndex:"info",key:"info"}];async function y(){if(a.value){d.value=!1;return}try{console.log(r),await x(),a.value={total:1599,numOfColumn:12,columns:[{name:"quality",typeLabel:"離散資料",type:"DISCRETE",total:1599,missing:0,average:8.32,standardDeviation:1.74,min:4.6,Q1:7.1,Q2:7.9,Q3:9.2,max:15.9},...["alchole","chlorides","citric acid","density","fixed acidity"].map(b=>({name:b,typeLabel:"連續資料",type:"CONTINUOUS",total:1599,missing:0,average:8.32,standardDeviation:1.74,min:4.6,Q1:7.1,Q2:7.9,Q3:9.2,max:15.9}))]}}catch(b){console.error(b)}}function n(){d.value=!0}function f(b){console.log(b)}return T({show:n}),(b,l)=>{const p=oe,v=V,c=Q,I=W,N=P,D=G,B=j;return u(),g(B,{open:e(d),"onUpdate:open":l[2]||(l[2]=A=>h(d)?d.value=A:null),title:"新增工作",centered:"","ok-text":"確定",class:"@container","cancel-text":"取消",width:"628px","ok-button-props":{class:"mb-5"},"cancel-button-props":{class:`mb-5 ${e(a)?"hidden":""}`},onOk:y},{default:t(()=>{var A,q,H;return[e(a)?S("",!0):(u(),g(N,{key:0,layout:"vertical",autocomplete:"off",class:"row g-4"},{default:t(()=>[s("div",Ce,[o(v,F(e(_).job,{label:"工作名稱",required:""}),{default:t(()=>[o(p,{value:e(r).job,"onUpdate:value":l[0]||(l[0]=L=>e(r).job=L),placeholder:"請輸入"},null,8,["value"])]),_:1},16),o(v,F(e(_).csv,{label:"上傳CSV",required:""}),{default:t(()=>[s("div",Me,[o(I,{"file-list":e(r).csv,"onUpdate:fileList":l[1]||(l[1]=L=>e(r).csv=L),accept:"text/csv",name:"file",onChange:f},{default:t(()=>[o(c,{color:"secondary"},{default:t(()=>l[3]||(l[3]=[O(" 選擇檔案 ")])),_:1})]),_:1},8,["file-list"]),o(c,{color:"link",class:"text-sm"},{default:t(()=>l[4]||(l[4]=[O(" 下載範本 ")])),_:1})])]),_:1},16)])]),_:1})),e(a)?(u(),M("div",Oe,[s("p",null,"總共數據筆數： "+E((A=e(a))==null?void 0:A.total),1),s("p",null,"columns數："+E((q=e(a))==null?void 0:q.numOfColumn),1),o(D,{columns:m,"table-layout":"auto",scroll:{x:"max-content"},"data-source":(H=e(a))==null?void 0:H.columns,pagination:i},{bodyCell:t(({column:L,record:J,text:Z})=>[L.key==="info"?(u(),g(c,{key:0,color:"primary",size:"small",onClick:Ue=>{var X;return(X=e(k))==null?void 0:X.show(J)}},{default:t(()=>l[5]||(l[5]=[O(" More Info ")])),_:2},1032,["onClick"])):(u(),M("span",ge,E(Z),1))]),_:1},8,["data-source"]),s("img",{src:e(ye),width:"500",class:"block mx-auto mt-3"},null,8,Te),o(ke,{ref_key:"modalRef",ref:k},null,512)])):S("",!0)]}),_:1},8,["open","cancel-button-props"])}}}),Ae={key:0,class:"text-neutral-900"},Ne={key:1,class:"text-neutral-900"},Le={key:1,class:"text-neutral-600 h-[300px] md:h-[500px] text-lg flex justify-center items-center font-bold"},Ve=w({__name:"index",setup($){const T=C(null),d=C(null),r=C(null);function R(i){switch(i){case"COMPLETED":return"完成";default:return i}}function _(i){switch(i){case"REGRESSION":return"回歸";case"CLASSIFICATION":return"分類";default:return i}}const x=[{title:"工作",dataIndex:"job",key:"job"},{title:"狀態",dataIndex:"status",key:"status"},{title:"任務",dataIndex:"task",key:"task"},{title:"結果",dataIndex:"result",key:"result"},{title:"預測",dataIndex:"prediction",key:"prediction"}],a=[{id:"1",job:"test1",status:"COMPLETED",task:"REGRESSION",bestModel:"CatBoostRegressor",models:[{name:"XGBRegressor",label:"極端梯度提升回歸器",FIT_TIME:.0366,SCORE_TIME:.0042,MEAN_ABSOLUTE_ERROR:.0019,MEAN_SQUARED_ERROR:6e-4,R2:.0011},{name:"LGBMRegressor",label:"輕量梯度增強回歸器",FIT_TIME:.0485,SCORE_TIME:.0034,MEAN_ABSOLUTE_ERROR:.0084,MEAN_SQUARED_ERROR:.0032,R2:.0011},{name:"CatBoostRegressor",label:"類別梯度回歸器",FIT_TIME:.5366,SCORE_TIME:.0038,MEAN_ABSOLUTE_ERROR:.0023,MEAN_SQUARED_ERROR:5e-4,R2:.0011}]},{id:"2",job:"test2",status:"COMPLETED",task:"CLASSIFICATION",bestModel:"XGBClassifier",models:[{name:"XGBClassifier",label:"極端梯度提升分類器",FIT_TIME:1.0095,SCORE_TIME:.0162,ACCURACY:.9533,AVERAGE_PRCISION:.9643,RECALL_WEIGHTED:.9533},{name:"LGBMClassifier",label:"輕量梯度增強分類器",FIT_TIME:.3098,SCORE_TIME:.012,ACCURACY:.9467,AVERAGE_PRCISION:.9881,RECALL_WEIGHTED:.9467},{name:"CatBoostClassifier",label:"類別梯度分類器",FIT_TIME:.6474,SCORE_TIME:.0096,ACCURACY:.96,AVERAGE_PRCISION:.9896,RECALL_WEIGHTED:.96}]},{id:"3",job:"test3",status:"COMPLETED",task:"REGRESSION",bestModel:"CatBoostRegressor",models:[{name:"XGBRegressor",label:"極端梯度提升回歸器",FIT_TIME:.0366,SCORE_TIME:.0042,MEAN_ABSOLUTE_ERROR:.0019,MEAN_SQUARED_ERROR:6e-4,R2:.0011},{name:"LGBMRegressor",label:"輕量梯度增強回歸器",FIT_TIME:.0485,SCORE_TIME:.0034,MEAN_ABSOLUTE_ERROR:.0084,MEAN_SQUARED_ERROR:.0032,R2:.0011},{name:"CatBoostRegressor",label:"類別梯度回歸器",FIT_TIME:.5366,SCORE_TIME:.0038,MEAN_ABSOLUTE_ERROR:.0023,MEAN_SQUARED_ERROR:5e-4,R2:.0011}]}],k={total:a.length,pages:1,size:10,current:1,countRange:"1"};return(i,m)=>{const y=te,n=Q,f=G,b=ee;return u(),g(b,{title:"AutoML"},{extraContent:t(()=>[o(n,{color:"primary",onClick:m[0]||(m[0]=l=>{var p;return(p=e(d))==null?void 0:p.show()})},{icon:t(()=>[o(y,{name:"plus",width:"16px"})]),default:t(()=>[m[2]||(m[2]=O(" 新增工作 "))]),_:1})]),default:t(()=>[s("div",null,[(a==null?void 0:a.length)>0?(u(),g(f,{key:0,columns:x,"table-layout":"auto",scroll:{x:"max-content"},"data-source":a,pagination:k},{bodyCell:t(({column:l,record:p,text:v})=>[l.key==="job"?(u(),M("span",Ae,E(v),1)):S("",!0),l.key==="status"?(u(),M("span",Ne,E(R(v)),1)):S("",!0),l.key==="task"?(u(),M(K,{key:2},[O(E(_(v)),1)],64)):S("",!0),l.key==="result"?(u(),g(n,{key:3,color:"link",onClick:()=>{var c;return(c=e(T))==null?void 0:c.show(p)}},{default:t(()=>m[3]||(m[3]=[s("span",{class:"text-brown-500 underline underline-offset-4 text-sm"},"分析結果",-1)])),_:2},1032,["onClick"])):S("",!0),l.key==="prediction"?(u(),g(n,{key:4,color:"link",onClick:m[1]||(m[1]=()=>{var c;return(c=e(r))==null?void 0:c.show()})},{default:t(()=>m[4]||(m[4]=[s("span",{class:"text-brown-500 underline underline-offset-4 text-sm"},"預測",-1)])),_:1})):S("",!0)]),_:1})):(u(),M("div",Le," 沒有資料 "))]),o(de,{ref_key:"resultModalRef",ref:T},null,512),o(Ee,{ref_key:"predictionModalRef",ref:r},null,512),o(Se,{ref_key:"jobCreationModalRef",ref:d},null,512)]),_:1})}}});export{Ve as default};
